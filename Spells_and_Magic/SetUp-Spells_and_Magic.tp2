BACKUP ~backup/Spells_and_Magic~
AUTHOR ~Grammarsalad~
//README ~Spells_and_Magic\Spells_and_Magic_README.pdf~

VERSION ~0.91.02~


ALWAYS

        OUTER_SPRINT ~folder~ ~Spells_and_Magic~

 	ACTION_IF GAME_IS ~bg2ee~ THEN BEGIN
          OUTER_SPRINT ~game~ ~bg2ee~
        END

 	ACTION_IF GAME_IS ~bgee~ THEN BEGIN
          OUTER_SPRINT ~game~ ~bgee~
        END

 	ACTION_IF GAME_IS ~iwdee~ THEN BEGIN
          OUTER_SPRINT ~game~ ~iwdee~
        END

 	ACTION_IF GAME_IS ~bgee bg2ee eet~ THEN BEGIN
          OUTER_SPRINT ~style~ ~bgee~
        END

 	ACTION_IF GAME_IS ~iwdee~ THEN BEGIN
          OUTER_SPRINT ~style~ ~iwdee~
        END

  	INCLUDE ~Spells_and_Magic/Spells_and_Magic.ini~

        INCLUDE ~Spells_and_Magic/craft_settings.ini~

        INCLUDE ~Spells_and_Magic/lib/variables.ini~

        INCLUDE ~Spells_and_Magic/lib/item_casting.tpa~

        INCLUDE ~Spells_and_Magic/lib/snm_functions.tpa~

        INCLUDE ~Spells_and_Magic/lib/lib.tpa~  //morph's hla functions

        INCLUDE ~Spells_and_Magic/lib/hla_actions.tpa~  //SD's hla functions

        INCLUDE ~Spells_and_Magic/lib/add_headers.tpa~

        INCLUDE ~Spells_and_Magic/lib/add_spell_ex.tpa~

        INCLUDE ~Spells_and_Magic/lib/effect_return.tpa~

        INCLUDE ~Spells_and_Magic/lib/add_sumtable.tpa~

	INCLUDE ~Spells_and_Magic/lib/SEQUENCER_MENU.tpa~

        INCLUDE ~Spells_and_Magic/lib/alter_effect.tpa~

	INCLUDE ~Spells_and_Magic/lib/remove_lines.tpa~

	INCLUDE ~Spells_and_Magic/lib/summon_table.tpa~

	INCLUDE ~Spells_and_Magic/lib/splprot_attributes.tpa~

	INCLUDE ~Spells_and_Magic/lib/spell_to_innate.tpa~

	INCLUDE ~Spells_and_Magic/lib/spell_clone_effects.tpa~

        INCLUDE ~Spells_and_Magic/lib/bg2fp_effect_batches_fnp.tpa~

        INCLUDE ~Spells_and_Magic/lib/bg2fp_effect_batches_b_vise.tpa~

        INCLUDE ~Spells_and_Magic/lib/bg2fp_effect_batches_spell_saves.tpa~

        INCLUDE ~Spells_and_Magic/lib/extra_alter_effect.tpa~

  	INCLUDE ~Spells_and_Magic/lib/scroll_placement.tpa~

END

//Below from IWDification. Looks like a way to check spell.ids for particular spells...
//ACTION_IF (!FILE_CONTAINS_EVALUATED(~spell.ids~ ~WIZARD_SNILLOCS_SNOWBALL_SWARM~) OR override_arcane) BEGIN

//need to keep my options open

ASK_EVERY_COMPONENT

/* Language Settings */
AUTO_TRA ~Spells_and_Magic/tra/%s~
LANGUAGE ~English~ ~english~
         ~Spells_and_Magic/tra/english/setup.tra~
         ~Spells_and_Magic/tra/english/IWD_spells.tra~  //for IWDEE spells
         ~Spells_and_Magic/tra/english/new_spells.tra~  //for new spells
         ~Spells_and_Magic/tra/english/enchant_items.tra~
//         ~Spells_and_Magic/tra/english/cantrips.tra~  //for cantrips
//         ~Spells_and_Magic/tra/english/revised.tra~  //for revised
//         ~Spells_and_Magic/tra/english/items.tra~  //for items
         ~Spells_and_Magic/tra/english/icons.tra~   //icons

///NOTE TO SELF: COMPLETELY REDO tp2 with finished products from Spells_and_Magic/comp/%VAR%.tpa~


//CONTINUE FROM HERE


//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////                                                                          ////////////////////////
////////////////////////             Spells & Magic: 101-???: New and Revised Spells              ////////////////////////
////////////////////////                                                                          ////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


/////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////
///////                                                   ///////
///////          Components 101-10x: New Spells           ///////
///////                                                   ///////
/////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////

//__________________________________________________________________________________
//__________________________________________________________________________________
//
//			101: Install All New Spells 
//__________________________________________________________________________________
//__________________________________________________________________________________

BEGIN @101  //Install All New Spells (including iwdee spells if not already installed)
SUBCOMPONENT @51 //New Spells
DESIGNATED 101
GROUP @0  //New and Revised Spells
REQUIRE_PREDICATE GAME_IS ~bgee bg2ee eet iwdee~ @901 // ~EE games only! ... for now~

//set relevant variables
OUTER_SET b_new_spells    = 1
OUTER_SET b_iwdee_spells  = 1

//SR NWN deflection compatibility
ACTION_CLEAR_ARRAY aoe_spell

///////////////////////////////////////
//////////// player modified variables

LAM b_spells_new_spells_settings
LAM b_spells_iwdee_spells_settings
LAM b_spells_cantrip_0_settings //because this gets checked on occasion
LAM b_spells_cantrip_1_settings //because this gets checked on occasion

//install iwdee spells if applicable
ACTION_IF !(GAME_IS ~iwdee~) BEGIN  //let's eliminate iwdee spells if already
  //arcane
  INCLUDE ~%folder%/comp/Setup_IWD_Arcane_Spells.tpa~  //
  //divine
  INCLUDE ~%folder%/comp/Setup_IWD_Divine_Spells.tpa~
END

//arcane spells
INCLUDE ~%folder%/comp/Setup_New_Arcane_Spells.tpa~  //


//divine spells
INCLUDE ~%folder%/comp/Setup_New_Divine_Spells.tpa~  //


/////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////
///////                                                   ///////
///////        Components 110-11x: Revised Spells         ///////
///////                                                   ///////
/////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////

//__________________________________________________________________________________
//__________________________________________________________________________________
//
//			119: Install Goodberry: goodberry wine revision
//__________________________________________________________________________________
//__________________________________________________________________________________

BEGIN @119  //Install Goodberry: goodberry wine revision
DESIGNATED 119
GROUP @0  //New and Revised Spells
REQUIRE_PREDICATE GAME_IS ~bgee bg2ee eet iwdee~ @901 // ~EE games only! ... for now~


//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////                                                                          ////////////////////////
////////////////////////               Spells & Magic: 200 - ???: Magic Item Creation             ////////////////////////
////////////////////////                                                                          ////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

/////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////
///////                                                   ///////
///////           Components 200-20x: Scrolls             ///////
///////                                                   ///////
/////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////

//__________________________________________________________________________________
//__________________________________________________________________________________
//
//	200: Craft Spell Scrolls: Add Spell Scroll Crafting: 2e pnp
//__________________________________________________________________________________
//__________________________________________________________________________________

BEGIN @200  //Add Spell Scroll Crafting
SUBCOMPONENT @52 //Scroll Crafting
DESIGNATED 200
GROUP @2  //Magic Item Creation
REQUIRE_PREDICATE (GAME_IS ~bgee bg2ee eet iwdee~) @3004
REQUIRE_PREDICATE (!(GAME_IS ~iwdee~) OR (FILE_EXISTS_IN_GAME ~mohla01.itm~ )) @3010


LAM b_scroll_global_settings

LAM b_scroll_level_settings

//marker
COPY_EXISTING ~SW1H04.itm~ ~override/B_sam200.itm~

ACTION_IF (%b_add_priest_scrolls% = 1) BEGIN //if set to add priest scrolls
  COPY_EXISTING ~SW1H04.itm~ ~override/B_sam201.itm~

  INCLUDE ~%folder%/lib/Setup_Priest_Scrolls.tpa~
END

INCLUDE ~%folder%/components/class_skills/scroll_crafting.tpa~  //

//__________________________________________________________________________________
//__________________________________________________________________________________
//
//	201: Craft Spell Scrolls: Add Spell Scroll Crafting: 2e modified
//__________________________________________________________________________________
//__________________________________________________________________________________

BEGIN @201  //Add Spell Scroll Crafting (add missing priest scrolls)
SUBCOMPONENT @52 //Scroll Crafting
DESIGNATED 201
GROUP @2  //Magic Item Creation
REQUIRE_PREDICATE (GAME_IS ~bgee bg2ee eet iwdee~) @3004
REQUIRE_PREDICATE (!(GAME_IS ~iwdee~) OR (FILE_EXISTS_IN_GAME ~mohla01.itm~ )) @3010
REQUIRE_PREDICATE !(FILE_EXISTS_IN_GAME ~B_sna201.itm~) AND !(FILE_EXISTS_IN_GAME ~B_fnp070.itm~) @3007  //~Priest scrolls have already been added!~

LAM b_scroll_global_settings

LAM b_scroll_level_settings

//2e modified settings

OUTER_SET b_mage_scroll     =  1
OUTER_SET b_cleric_scroll   =  4
OUTER_SET b_druid_scroll    =  6
OUTER_SET b_bard_scroll     = 13
OUTER_SET b_paladin_scroll  =  0
OUTER_SET b_ranger_scroll   =  0
OUTER_SET b_sorc_scroll     =  4
OUTER_SET b_shaman_scroll   =  6

ACTION_IF (%b_add_priest_scrolls% = 1) BEGIN //if set to add priest scrolls

//marker
  COPY_EXISTING ~SW1H04.itm~ ~override/B_sam201.itm~

  INCLUDE ~%folder%/lib/Setup_Priest_Scrolls.tpa~
END

INCLUDE ~%folder%/components/class_skills/scroll_crafting.tpa~

/////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////
///////                                                   ///////
///////           Components 210-20x: Potions             ///////
///////                                                   ///////
/////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////

//__________________________________________________________________________________
//__________________________________________________________________________________
//
//	210: Add Brew Potion: 2e pnp
//__________________________________________________________________________________
//__________________________________________________________________________________

BEGIN @210  //Add Brew Potion
SUBCOMPONENT @53 // ~Potion Brewing~
DESIGNATED 210
GROUP @2  //Magic Item Creation
REQUIRE_PREDICATE GAME_IS ~bgee bg2ee eet iwdee~ @901 // ~EE games only! ... for now~

LAM b_potion_global_settings

ACTION_IF (%b_3e_potion_create% = 1) BEGIN //if set to add priest scrolls
  COPY_EXISTING ~SW1H04.itm~ ~override/B_sam211.itm~

  INCLUDE ~%folder%/lib/Setup_3e_potions.tpa~

END

//__________________________________________________________________________________
//__________________________________________________________________________________
//
//	211: Add Brew Potion: 2e modified
//__________________________________________________________________________________
//__________________________________________________________________________________

BEGIN @211  //Add Brew Potion (and add 3e potions)
SUBCOMPONENT @53 // ~Potion Brewing~
DESIGNATED 211
GROUP @2  //Magic Item Creation
REQUIRE_PREDICATE GAME_IS ~bgee bg2ee eet iwdee~ @901 // ~EE games only! ... for now~

LAM b_potion_global_settings

ACTION_IF (%b_3e_potion_create% = 1) BEGIN //if set to add priest scrolls
  COPY_EXISTING ~SW1H04.itm~ ~override/B_sam211.itm~

  INCLUDE ~%folder%/lib/Setup_3e_potions.tpa~

END

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////                                                                          ////////////////////////
////////////////////////              Spells & Magic: 300-???: New and Revised Items              ////////////////////////
////////////////////////                                                                          ////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
///////                                                              ///////
///////                Components 300-30x: New Items                 ///////
///////                                                              ///////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
///////                                                              ///////
///////               Components 310-31x: Revised Items              ///////
///////                                                              ///////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////


//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////                                                                          ////////////////////////
////////////////////////       Spells & Magic: 400 - ???: Expanded Abilities and Attributes       ////////////////////////
////////////////////////                                                                          ////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////



//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////                                                                          ////////////////////////
////////////////////////   Spells & Magic: 500 - ???: Cantrips, Rituals and Modified Spell Lists  ////////////////////////
////////////////////////                                                                          ////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
///////                                                              ///////
///////                  Components 500-50x: Cantrips                ///////
///////                                                              ///////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////


////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
///////                                                              ///////
///////          Components 510-51x: Unique Spell Lists              ///////
///////                                                              ///////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
///////                                                              ///////
///////          Components 520-52x: High Level Abilities            ///////
///////                                                              ///////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
///////                                                              ///////
///////                Components 530-53x: Rituals                   ///////
///////                                                              ///////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////                                                                          ////////////////////////
////////////////////////                   Spells & Magic: 600 - ???: Limitations                 ////////////////////////
////////////////////////                                                                          ////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////                                                                          ////////////////////////
////////////////////////                     Spells & Magic: 700 - ???: Extras                    ////////////////////////
////////////////////////                                                                          ////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
