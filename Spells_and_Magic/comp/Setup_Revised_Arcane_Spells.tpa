////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////                                         //////////////////////////////////////
///////////////////////////////                INDIVIDUAL SPELL CHANGES            /////////////////////////////////
/////////////////////////////////////                                         //////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////                                         //////////////////////////////////////
/////////////////////////////////////               Arcane Spells             //////////////////////////////////////
/////////////////////////////////////                                         //////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

ACTION_IF (%b_rev_spells% < 2) BEGIN  //


////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////                                         //////////////////////////////////////
/////////////////////////////////////                1st level                //////////////////////////////////////
/////////////////////////////////////                                         //////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//____________________________________________________________Armor________________________________________________________________________________//
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

////////////////////////////
//////NOTES:
////////////////////////////
//need to ensure compatibility with 1st level cantrips TO DO CONTINUE

//Touch Range spell
///////////////////////////////////////////////////////////////////////
ACTION_IF (%armor_touch_patch% > 0) BEGIN  //

///////////////////////////////////////////////////
//////Spell Itself (and spell biz (e.g. sec spells)
///////////////////////////////////////////////////
LAF RES_NUM_OF_SPELL_NAME
  STR_VAR spell_name = ~WIZARD_ARMOR~
  RET spell_res
END
   COPY_EXISTING ~%spell_res%.spl~ ~override~
     LPF ALTER_SPELL_HEADER 
       INT_VAR target = 1 range = 1
     END
  LPF ALTER_EFFECT
      INT_VAR target = 2            //
  END      //
 SPRINT old @10110031//old text
 SPRINT new @10110032//new text
     LPF TEXT_REPLACE
       STR_VAR orig_text = EVAL  ~%old%~  new_text = EVAL  ~%new%~
     END
 SPRINT old1 @10110049//old text
 SPRINT new1 @10110050//new text
     LPF TEXT_REPLACE
       STR_VAR orig_text = EVAL  ~%old1%~  new_text = EVAL  ~%new1%~
     END

END //end armor touch patch

//Bonus HP
///////////////////////////////////////////////////////////////////////
ACTION_IF (%armor_bonus_hp% > 0) BEGIN  //

///////////////////////////////////////////////////
//////Spell Itself (and spell biz (e.g. sec spells)
///////////////////////////////////////////////////

LAF RES_NUM_OF_SPELL_NAME
  STR_VAR spell_name = ~WIZARD_ARMOR~
  RET spell_res
END
   COPY_EXISTING ~%spell_res%.spl~ ~override~
		LPF CLONE_EFFECT 
			INT_VAR multi_match = 1	match_opcode = 0 opcode = 18 parameter1 = %armor_bonus_hp% parameter2 = 3
		END   //
		LPF CLONE_EFFECT 
			INT_VAR multi_match = 1	match_opcode = 0 opcode = 17 parameter1 = %armor_bonus_hp% parameter2 = 0
		END   //
 SPRINT old1 @10110054//old text
 SPRINT new1 @10110055//new text
     LPF TEXT_REPLACE
       STR_VAR orig_text = EVAL  ~%old1%~  new_text = EVAL  ~%new1%~
     END

END 

//armor grants AC bonus
///////////////////////////////////////////////////////////////////////
ACTION_IF (%armor_bonus_patch% > 0) BEGIN  //
LAF RES_NUM_OF_SPELL_NAME
  STR_VAR spell_name = ~WIZARD_ARMOR~
  RET spell_res
END
 COPY_EXISTING ~%spell_res%.spl~ ~override~
   LPF ALTER_EFFECT INT_VAR multi_match = 1	match_opcode = 0  parameter1 = %armor_bonus_patch% parameter2 = 0 END  //bonus to AC rather than set AC. 
 SPRINT old1 @10110056//old text
 SPRINT new1 @10110057//new text
     LPF TEXT_REPLACE
       STR_VAR orig_text = EVAL  ~%old1%~  new_text = EVAL  ~%new1%~
     END
 SPRINT old1 @10110058//old text
 SPRINT new1 @10110059//new text
     LPF TEXT_REPLACE
       STR_VAR orig_text = EVAL  ~%old1%~  new_text = EVAL  ~%new1%~
     END
END 

//armor dispelled when take damage
///////////////////////////////////////////////////////////////////////
ACTION_IF (%armor_cancel_patch% > 0) BEGIN  //

LAF RES_NUM_OF_SPELL_NAME
  STR_VAR spell_name = ~WIZARD_ARMOR~
  RET spell_res
END
   COPY_EXISTING ~%spell_res%.spl~ ~override~
		LPF CLONE_EFFECT 
			INT_VAR multi_match = 1	match_opcode = 0 opcode = 177 parameter1 = 0 parameter2 = 2 STR_VAR resource = EVAL ~%spell_res%D~
		END   //

 SPRINT old1 @10110052//old text
 SPRINT new1 @10110053//new text
     LPF TEXT_REPLACE
       STR_VAR orig_text = EVAL  ~%old1%~  new_text = EVAL  ~%new1%~
     END

//eff 
COPY ~%folder%\data\rev_spells\armor\b_wi102.eff~ ~override\%spell_res%D.eff~
	WRITE_EVALUATED_ASCII 0x0030 ~%spell_res%D~
COPY ~%folder%\data\rev_spells\armor\spwi102d.spl~ ~override\%spell_res%D.spl~
        SAY NAME1 @10110051
        SAY NAME2 @10110051

END 
/*
opcode = 177
target = 2
power = 0
timing = 4
parameter1 = 5
parameter2 = 160
power = 0
resist_dispel = 2
duration = 1
probability1 = 100
probability2 = 0
dicenumber = 0
dicesize = 0
savingthrow = 0
savebonus = 0
header =
insert_point = 7
*/


END 