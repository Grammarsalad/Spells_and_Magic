BEGIN ~B_CPRP1~

//ADD A LOCAL VARIABLE IN THE SPL THAT IS EQUAL TO THE MAX NUM OF CANTRIPS THAT THE MAGE CAN PREPARE.   DONE NAMED "B_CPRP"
//ADD A COUNTER FOR EACH PREPARED CANTRIP.  WHEN THAT COUNTER IS EQUAL TO THE CANTRIP MAX, NO MORE SPELLS AVAILABLE TO PREPARE.
//DON'T FORGET TO ADD A 'START OVER' OPTION THAT RESETS THIS SECOND COUNTER, SO THE PLAYER CAN PREP OTHER SPELLS!

IF ~GlobalLT("B_PNCAN","GLOBAL",3)~ THEN BEGIN B_Prp001   //CANNOT EXIT RIGHT AFTER SELECTION.  HAVE TO GO TO A VERIFICATION CHECK TO ENSURE THAT THE SPELL IS NOT ALREADY MEMORIZED!
SAY @115255
IF ~Global("B_FBOLT","LOCALS",1)~ THEN REPLY @115260 GOTO B_Prp101
IF ~Global("B_ASPLA","LOCALS",1)~ THEN REPLY @115261 GOTO B_Prp102
IF ~Global("B_CRAY","LOCALS",1)~ THEN REPLY @115262 GOTO B_Prp103
IF ~Global("B_SGRA","LOCALS",1)~ THEN REPLY @115263 GOTO B_Prp104
IF ~Global("B_INFA","LOCALS",1)~ THEN REPLY @115264 GOTO B_Prp105
IF ~Global("B_FRND","LOCALS",1)~ THEN REPLY @115265 GOTO B_Prp106
IF ~Global("B_CHILL","LOCALS",1)~ THEN REPLY @115266 GOTO B_Prp107
END

IF ~Global("B_PNCAN","GLOBAL",3)~ THEN BEGIN B_Prp002
SAY @115255
IF ~Global("B_PLev","GLOBAL",1)~ THEN REPLY @115256 DO ~SetGlobal("B_PDie","GLOBAL",1)~ EXIT
//IF ~Global("B_Lev","GLOBAL",2)~ THEN REPLY @115255 GOTO B_Sel003
//IF ~Global("B_Lev","GLOBAL",3)~ THEN REPLY @115255 GOTO B_Sel004
END

IF ~~ THEN BEGIN B_Prp101
SAY @105001
IF ~!Global("B_PFBLT","GLOBAL",1)~ THEN REPLY @115260 DO ~SetGlobal("B_PFBLT","GLOBAL",1) IncrementGlobal("B_PNCAN","GLOBAL",1) AddSpecialAbility("b_wc101")~ EXIT
IF ~Global("B_PFBLT","GLOBAL",1)~ THEN REPLY @115275 GOTO B_Prp001
END

IF ~~ THEN BEGIN B_Prp102
SAY @105003
IF ~!Global("B_PASPL","GLOBAL",1)~ THEN REPLY @115261 DO ~SetGlobal("B_PASPL","GLOBAL",1) IncrementGlobal("B_PNCAN","GLOBAL",1) AddSpecialAbility("b_wc102")~ EXIT
IF ~Global("B_PASPL","GLOBAL",1)~ THEN REPLY @115275 GOTO B_Prp001
END

IF ~~ THEN BEGIN B_Prp103
SAY @105005
IF ~!Global("B_PCRAY","GLOBAL",1)~ THEN REPLY @115262 DO ~SetGlobal("B_PCRAY","GLOBAL",1) IncrementGlobal("B_PNCAN","GLOBAL",1) AddSpecialAbility("b_wc103")~ EXIT
IF ~Global("B_PCRAY","GLOBAL",1)~ THEN REPLY @115275 GOTO B_Prp001
END

IF ~~ THEN BEGIN B_Prp104
SAY @105007
IF ~!Global("B_PSGRA","GLOBAL",1)~ THEN REPLY @115263 DO ~SetGlobal("B_PSGRA","GLOBAL",1) IncrementGlobal("B_PNCAN","GLOBAL",1) AddSpecialAbility("b_wc104")~ EXIT
IF ~Global("B_PSGRA","GLOBAL",1)~ THEN REPLY @115275 GOTO B_Prp001
END

IF ~~ THEN BEGIN B_Prp105
SAY @105009
IF ~!Global("B_PINFA","GLOBAL",1)~ THEN REPLY @115264 DO ~SetGlobal("B_PINFA","GLOBAL",1) IncrementGlobal("B_PNCAN","GLOBAL",1) AddSpecialAbility("b_wc105")~ EXIT
IF ~Global("B_PINFA","GLOBAL",1)~ THEN REPLY @115275 GOTO B_Prp001
END

IF ~~ THEN BEGIN B_Prp106
SAY @105011
IF ~!Global("B_PFRND","GLOBAL",1)~ THEN REPLY @115265 DO ~SetGlobal("B_PFRND","GLOBAL",1) IncrementGlobal("B_PNCAN","GLOBAL",1) AddSpecialAbility("b_wc106")~ EXIT
IF ~Global("B_PFRND","GLOBAL",1)~ THEN REPLY @115275 GOTO B_Prp001
END

IF ~~ THEN BEGIN B_Prp107
SAY @105011
IF ~!Global("B_PCHIL","GLOBAL",1)~ THEN REPLY @115265 DO ~SetGlobal("B_PCHIL","GLOBAL",1) IncrementGlobal("B_PNCAN","GLOBAL",1) AddSpecialAbility("b_wc107")~ EXIT
IF ~Global("B_PCHIL","GLOBAL",1)~ THEN REPLY @115275 GOTO B_Prp001
END
